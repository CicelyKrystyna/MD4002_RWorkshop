
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data Workflow &#8212; R Workshop</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'MD4002_RWorkshop';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Case Study: ANOVA" href="ANOVA.html" />
    <link rel="prev" title="An Introduction to R" href="RBasics.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo_light.png" class="logo__image only-light" alt="R Workshop - Home"/>
    <img src="_static/logo_dark.png" class="logo__image only-dark pst-js-only" alt="R Workshop - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Installing R &amp; RStudio</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installR.html">Installing R</a></li>
<li class="toctree-l1"><a class="reference internal" href="installRStudio.html">Installing RStudio</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="RBasics.html">An Introduction to R</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Conducting a Data Project</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Data Workflow</a></li>



</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Quantitative Case Studies</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ANOVA.html">Case Study: ANOVA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Power_Calculations.html">Case Study: Power Calculations</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/CicelyKrystyna/MD4002_RWorkshop/blob/main/MD4002_RWorkshop.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/MD4002_RWorkshop.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Data Workflow</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Data Workflow</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario">Scenario</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#r-set-up">R Set-up</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-load-packages">Install/Load Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#path-setting">Path Setting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-in-your-data">Load in your Data</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-wrangling">Data Wrangling</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#viewing-your-data">Viewing your data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-cleaning-and-preparation">Data Cleaning and Preparation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-column-names">Cleaning column names</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#trimming-the-data">Trimming the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-the-data">Filtering the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-checking">Variable checking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#visualisations">Visualisations</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tables">Tables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graphs">Graphs</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="data-workflow">
<h1>Data Workflow<a class="headerlink" href="#data-workflow" title="Link to this heading">#</a></h1>
<p>The main workflow for any data analysis project involves the following:</p>
<ul class="simple">
<li><p>R Set-up (loading relevant packages and data)</p></li>
<li><p>Data Wrangling (cleaning and preparation)</p></li>
<li><p>Visualisations (tables and graphs)</p></li>
<li><p>Analysis (modelling or other technical analysis)</p></li>
<li><p>Assumption checking</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Advanced statistical analysis is beyond the scope of this workshop.</p>
</div>
<p><a id="scenario"></a></p>
<section id="scenario">
<h2>Scenario<a class="headerlink" href="#scenario" title="Link to this heading">#</a></h2>
<p>We are a part of a research team conducting a study that aims to understand if there is an association between the average number of hours an individual sleeps each night <code class="docutils literal notranslate"><span class="pre">[sleep_hrs_night]</span></code> and the development of hypertension
<code class="docutils literal notranslate"><span class="pre">[hypertension]</span></code> in adults aged 40 years or older <code class="docutils literal notranslate"><span class="pre">[age]</span></code>. The research team believes that the following factors could obscure such an association, and as such should be adjusted for:</p>
<ul class="simple">
<li><p>Average daily alcohol consumption <code class="docutils literal notranslate"><span class="pre">[alcohol_day]</span></code></p></li>
<li><p>Regular use of marijuana <code class="docutils literal notranslate"><span class="pre">[regular_marij]</span></code></p></li>
<li><p>Is participant currently a smoker <code class="docutils literal notranslate"><span class="pre">[smoke_now]</span></code></p></li>
<li><p>Is participant regularly physically active <code class="docutils literal notranslate"><span class="pre">[phys_active]</span></code></p></li>
<li><p>BMI Group (underweight, healthy, overweight, obese) <code class="docutils literal notranslate"><span class="pre">[bmi]</span></code></p></li>
</ul>
<p>To answer this research question, we will use the US National Health and Nutrition Examination Survey (NHANES) provided within the data file <code class="docutils literal notranslate"><span class="pre">sleep.csv.</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The statistical methods for survey data are beyond the scope of this R workshop. As such we will treat this data as if it was collected from randomly selected individuals.</p>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="r-set-up">
<h1>R Set-up<a class="headerlink" href="#r-set-up" title="Link to this heading">#</a></h1>
<p>There are a few things you need to do every time you open R:</p>
<ul class="simple">
<li><p>Install/Load packages</p></li>
<li><p>Read in data (import data) into R</p></li>
</ul>
<section id="install-load-packages">
<h2>Install/Load Packages<a class="headerlink" href="#install-load-packages" title="Link to this heading">#</a></h2>
<p>We <strong>install</strong> packages in R once. We <strong>load</strong> packages we are going to use everytime we open/start R. We recommended that you write the installation/load code at the top of your code script. This makes it easy to see what packages you used at a glance.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The symbol # is used to indicate a comment in R. This is a line which R will skip over and not try to run as code. The best codes are well commented.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install your packages (first use only)</span>
<span class="c1"># install.packages(&quot;tidyverse&quot;)</span>
<span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;janitor&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;gtsummary&quot;</span><span class="p">)</span>

<span class="c1"># Load your packages (everytime you restart R)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">janitor</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">gtsummary</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The downloaded binary packages are in
	/var/folders/s6/j29zk3c50kj6bvnscxkj0lc40000gr/T//Rtmp3p50xe/downloaded_packages
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The downloaded binary packages are in
	/var/folders/s6/j29zk3c50kj6bvnscxkj0lc40000gr/T//Rtmp3p50xe/downloaded_packages
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Attaching core tidyverse packages</span> ─────────────────────────────────────────────────────────────────── tidyverse 2.0.0 ──
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">dplyr    </span> 1.1.4     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">readr    </span> 2.1.5
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">forcats  </span> 1.0.0     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">stringr  </span> 1.5.1
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">ggplot2  </span> 3.5.1     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tibble   </span> 3.2.1
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">lubridate</span> 1.9.4     <span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">tidyr    </span> 1.3.1
<span class=" -Color -Color-Green">✔</span> <span class=" -Color -Color-Blue">purrr    </span> 1.0.4     
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>── <span class=" -Color -Color-Bold">Conflicts</span> ───────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">filter()</span> masks <span class=" -Color -Color-Blue">stats</span>::filter()
<span class=" -Color -Color-Red">✖</span> <span class=" -Color -Color-Blue">dplyr</span>::<span class=" -Color -Color-Green">lag()</span>    masks <span class=" -Color -Color-Blue">stats</span>::lag()
<span class=" -Color -Color-Cyan">ℹ</span> Use the conflicted package (<span class=" -Color -Color-Blue">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Attaching package: ‘janitor’
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The following objects are masked from ‘package:stats’:

    chisq.test, fisher.test
</pre></div>
</div>
</div>
</div>
</section>
<section id="path-setting">
<h2>Path Setting<a class="headerlink" href="#path-setting" title="Link to this heading">#</a></h2>
<p>When conducting your data analysis project you will want to keep all of your files organised. We  suggest you set up a directory (folder) to store all of your files (data and outputs) and name it appropriately e.g. DataProject. Download the <code class="docutils literal notranslate"><span class="pre">sleep.csv</span></code> file from GALEN and place it in this directory.</p>
<p>It may be useful to determine your working directory (or path) for R and then set it to be the directory you have created for your data project. This means when pointing to files e.g. <code class="docutils literal notranslate"><span class="pre">sleep.csv</span></code> you can keep your path short.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># an example of path setting</span>
<span class="c1">#getwd()</span>
<span class="c1">#setwd(&quot;~/Documents/DataProject&quot;)</span>
<span class="c1">#getwd()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="load-in-your-data">
<h2>Load in your Data<a class="headerlink" href="#load-in-your-data" title="Link to this heading">#</a></h2>
<p>There are a variety of different ways to read data into R, since there are a variety of different ways to save and store data. One of the more common ways to save data is as a CSV (comma delimited file).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read in your data and assign this to a dataframe called sleep</span>
<span class="c1"># A dataframe is the object R uses to store data sets</span>
<span class="c1">#sleep &lt;- read_csv(&quot;sleep.csv&quot;)</span>
<span class="n">sleep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read_csv</span><span class="p">(</span><span class="s">&quot;https://raw.github.com/CicelyKrystyna/MD4002_RWorkshop/master/sleep.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">Rows: </span><span class=" -Color -Color-Blue">4778</span> <span class=" -Color -Color-Bold">Columns: </span><span class=" -Color -Color-Blue">26</span>
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">──</span> <span class=" -Color -Color-Bold">Column specification</span> <span class=" -Color -Color-Cyan">───────────────────────────────────────────────────────────────────────────────────────────────────</span>
<span class=" -Color -Color-Bold">Delimiter:</span> &quot;,&quot;
<span class=" -Color -Color-Red">chr</span> (14): gender, race1, education, MaritalStatus, hh income, home own, work...
<span class=" -Color -Color-Green">dbl</span> (12): ID, age, age (months), poverty, weight, height, pulse, bp_dia_ave,...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Cyan">ℹ</span> Use `spec()` to retrieve the full column specification for this data.
<span class=" -Color -Color-Cyan">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice the message R prints out. It indicates the delimiter (,), the type of each column, and the row and column count.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>R automatically saves the first row from the .csv file as column names. Ensure only the first row and first row of your data file describe the variables.</p>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="data-wrangling">
<h1>Data Wrangling<a class="headerlink" href="#data-wrangling" title="Link to this heading">#</a></h1>
<section id="viewing-your-data">
<h2>Viewing your data<a class="headerlink" href="#viewing-your-data" title="Link to this heading">#</a></h2>
<p>It is generally <strong>good practice</strong> to look at your data to scan for things that might need fixing, for example:</p>
<ul class="simple">
<li><p>text in numerical cells (e.g. “six” vs 6)</p></li>
<li><p>odd characters (e.g. &gt;, &lt;, /, etc.)</p></li>
<li><p>inconsistent Date formats (e.g 01/16/2024, 16-1-24, Jan 16 2024, etc.)</p></li>
<li><p>coded variables (e.g. 99 = Missing)</p></li>
<li><p>typos (e.g. ys, yse)</p></li>
<li><p>inconsistent capitalisation or abbreviations (e.g. Yes, Y, yes)</p></li>
<li><p>misaligned/counterintuertive variable types</p></li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>It is <strong>bad practice</strong> to look at your data to determine patterns or to determine what research questions you should ask and test.</p>
</div>
<p>There are a couple of different ways you can look at your data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># glimpse provides information on each column: it&#39;s name, typ/class and the first few entries:</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rows: 4,778
Columns: 26
$ ID              &lt;dbl&gt; 54978, 62686, 60371, 59023, 53330, 67222, 61194, 69925…
$ gender          &lt;chr&gt; &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Femal…
$ age             &lt;dbl&gt; 80.15551, 80.50146, 80.82286, 80.26906, 80.69757, 80.8…
$ `age (months)`  &lt;dbl&gt; 961.8661, 966.0175, 969.8743, 963.2287, 968.3709, 970.…
$ race1           &lt;chr&gt; &quot;Black&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, …
$ education       &lt;chr&gt; &quot;9 - 11th Grade&quot;, &quot;High School&quot;, &quot;Some College&quot;, &quot;9 - …
$ MaritalStatus   &lt;chr&gt; &quot;Widowed&quot;, &quot;Widowed&quot;, &quot;Separated&quot;, &quot;Married&quot;, &quot;Married…
$ `hh income`     &lt;chr&gt; &quot;20000-24999&quot;, &quot;35000-44999&quot;, <span class=" -Color -Color-Red">NA</span>, &quot;15000-19999&quot;, &quot;2000…
$ poverty         &lt;dbl&gt; 1.07, 2.31, <span class=" -Color -Color-Red">NA</span>, 1.21, 1.37, 1.15, 0.42, 1.30, 1.29, 5.…
$ `home own`      &lt;chr&gt; &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;…
$ work            &lt;chr&gt; &quot;NotWorking&quot;, &quot;NotWorking&quot;, &quot;NotWorking&quot;, &quot;NotWorking&quot;…
$ weight          &lt;dbl&gt; 120.5, 100.0, 95.9, 91.8, 113.0, 87.2, 86.5, 80.9, 81.…
$ height          &lt;dbl&gt; 166.6, 160.7, 157.9, 155.9, 176.8, 156.4, 156.3, 151.3…
$ pulse           &lt;dbl&gt; 62, 82, 60, 80, 64, 92, 90, 62, 56, 60, 70, 72, 66, 60…
$ bp_dia_ave      &lt;dbl&gt; 61, 74, 28, 61, 78, 71, 51, 62, 59, 57, 67, 87, 40, 56…
$ bp_sys_ave      &lt;dbl&gt; 127, 156, 150, 130, 156, 126, 119, 136, 143, 168, 136,…
$ diabetes        &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No…
$ n_pregnancies   &lt;dbl&gt; 9, 2, 5, 2, <span class=" -Color -Color-Red">NA</span>, 1, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, 10, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, 3, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, …
$ sleep_hrs_night &lt;dbl&gt; 7.156727, 6.199555, 9.941897, 7.892662, 5.752325, 8.55…
$ sleep_trouble   &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;,…
$ phys_active     &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, …
$ smoke_now       &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;,…
$ alcohol_day     &lt;chr&gt; &quot;3&quot;, &quot;2&quot;, &quot;4&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;2&quot;, &quot;1&quot;, &quot;2&quot;, &quot;2&quot;,…
$ regular_marij   &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Ye…
$ hypertension    &lt;chr&gt; &quot;No Hypertension&quot;, &quot;No Hypertension&quot;, &quot;No Hypertension…
$ BMI             &lt;dbl&gt; 43.41, 38.70, 38.46, 37.77, 36.15, 35.60, 35.41, 35.30…
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># head (tail) shows the first (last) n rows:</span>
<span class="c1"># head(sleep, n=2)</span>
<span class="c1"># tail(sleep, n=3)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># View will open the whole dataframe</span>
<span class="c1"># We will comment this out here to save space</span>
<span class="c1"># View(sleep) # alternatively in RStudio click on sleep in the environment panel</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="data-cleaning-and-preparation">
<h2>Data Cleaning and Preparation<a class="headerlink" href="#data-cleaning-and-preparation" title="Link to this heading">#</a></h2>
<section id="cleaning-column-names">
<h3>Cleaning column names<a class="headerlink" href="#cleaning-column-names" title="Link to this heading">#</a></h3>
<p>A good first step is to clean column names, in case there are any odd symbols or mixed cases. The quickest way to do this is with the clean_names function from the <code class="docutils literal notranslate"><span class="pre">janitor</span></code> package.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># fix column names reassigning this to the dataframe sleep</span>
<span class="n">sleep</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">clean_names</span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>

<span class="c1"># glimpse the dataframe to see the changes that have been made</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">sleep</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rows: 4,778
Columns: 26
$ id              &lt;dbl&gt; 54978, 62686, 60371, 59023, 53330, 67222, 61194, 69925…
$ gender          &lt;chr&gt; &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Femal…
$ age             &lt;dbl&gt; 80.15551, 80.50146, 80.82286, 80.26906, 80.69757, 80.8…
$ age_months      &lt;dbl&gt; 961.8661, 966.0175, 969.8743, 963.2287, 968.3709, 970.…
$ race1           &lt;chr&gt; &quot;Black&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, &quot;White&quot;, …
$ education       &lt;chr&gt; &quot;9 - 11th Grade&quot;, &quot;High School&quot;, &quot;Some College&quot;, &quot;9 - …
$ marital_status  &lt;chr&gt; &quot;Widowed&quot;, &quot;Widowed&quot;, &quot;Separated&quot;, &quot;Married&quot;, &quot;Married…
$ hh_income       &lt;chr&gt; &quot;20000-24999&quot;, &quot;35000-44999&quot;, <span class=" -Color -Color-Red">NA</span>, &quot;15000-19999&quot;, &quot;2000…
$ poverty         &lt;dbl&gt; 1.07, 2.31, <span class=" -Color -Color-Red">NA</span>, 1.21, 1.37, 1.15, 0.42, 1.30, 1.29, 5.…
$ home_own        &lt;chr&gt; &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;, &quot;Own&quot;…
$ work            &lt;chr&gt; &quot;NotWorking&quot;, &quot;NotWorking&quot;, &quot;NotWorking&quot;, &quot;NotWorking&quot;…
$ weight          &lt;dbl&gt; 120.5, 100.0, 95.9, 91.8, 113.0, 87.2, 86.5, 80.9, 81.…
$ height          &lt;dbl&gt; 166.6, 160.7, 157.9, 155.9, 176.8, 156.4, 156.3, 151.3…
$ pulse           &lt;dbl&gt; 62, 82, 60, 80, 64, 92, 90, 62, 56, 60, 70, 72, 66, 60…
$ bp_dia_ave      &lt;dbl&gt; 61, 74, 28, 61, 78, 71, 51, 62, 59, 57, 67, 87, 40, 56…
$ bp_sys_ave      &lt;dbl&gt; 127, 156, 150, 130, 156, 126, 119, 136, 143, 168, 136,…
$ diabetes        &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No…
$ n_pregnancies   &lt;dbl&gt; 9, 2, 5, 2, <span class=" -Color -Color-Red">NA</span>, 1, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, 10, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, 3, <span class=" -Color -Color-Red">NA</span>, <span class=" -Color -Color-Red">NA</span>, …
$ sleep_hrs_night &lt;dbl&gt; 7.156727, 6.199555, 9.941897, 7.892662, 5.752325, 8.55…
$ sleep_trouble   &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;,…
$ phys_active     &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, …
$ smoke_now       &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;,…
$ alcohol_day     &lt;chr&gt; &quot;3&quot;, &quot;2&quot;, &quot;4&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;2&quot;, &quot;1&quot;, &quot;2&quot;, &quot;2&quot;,…
$ regular_marij   &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Ye…
$ hypertension    &lt;chr&gt; &quot;No Hypertension&quot;, &quot;No Hypertension&quot;, &quot;No Hypertension…
$ bmi             &lt;dbl&gt; 43.41, 38.70, 38.46, 37.77, 36.15, 35.60, 35.41, 35.30…
</pre></div>
</div>
</div>
</div>
</section>
<section id="trimming-the-data">
<h3>Trimming the data<a class="headerlink" href="#trimming-the-data" title="Link to this heading">#</a></h3>
<p>It is often practical to trim your data set down to only the
<strong>necessary variables</strong> (columns). We can easily do this using the <code class="docutils literal notranslate"><span class="pre">select</span></code> function. We will keep the variables mentioned in the <a class="reference internal" href="#scenario"><span class="xref myst">Scenario</span></a>. We will keep the gender variable <code class="docutils literal notranslate"><span class="pre">[gender]</span></code> too as there may be interesting sex-stratified differences in the data. It is also important to keep the identifier <code class="docutils literal notranslate"><span class="pre">[id]</span></code> for each data entry.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is best practise to preserve the original dataframe so when we trim we assign this to a new dataframe.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># trim sleep to select columns only and assign this to a new dataframe sleep_trim</span>
<span class="n">sleep_trim</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="nf">select</span><span class="p">(</span><span class="n">id</span><span class="p">,</span>
<span class="w">    </span><span class="n">gender</span><span class="p">,</span>
<span class="w">    </span><span class="n">age</span><span class="p">,</span>
<span class="w">    </span><span class="n">hypertension</span><span class="p">,</span>
<span class="w">    </span><span class="n">sleep_hrs_night</span><span class="p">,</span>
<span class="w">    </span><span class="n">phys_active</span><span class="p">,</span>
<span class="w">    </span><span class="n">smoke_now</span><span class="p">,</span>
<span class="w">    </span><span class="n">alcohol_day</span><span class="p">,</span>
<span class="w">    </span><span class="n">regular_marij</span><span class="p">,</span>
<span class="w">    </span><span class="n">bmi</span><span class="p">)</span>

<span class="c1"># glimpse the new dataframe</span>
<span class="nf">glimpse</span><span class="p">(</span><span class="n">sleep_trim</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rows: 4,778
Columns: 10
$ id              &lt;dbl&gt; 54978, 62686, 60371, 59023, 53330, 67222, 61194, 69925…
$ gender          &lt;chr&gt; &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Male&quot;, &quot;Femal…
$ age             &lt;dbl&gt; 80.15551, 80.50146, 80.82286, 80.26906, 80.69757, 80.8…
$ hypertension    &lt;chr&gt; &quot;No Hypertension&quot;, &quot;No Hypertension&quot;, &quot;No Hypertension…
$ sleep_hrs_night &lt;dbl&gt; 7.156727, 6.199555, 9.941897, 7.892662, 5.752325, 8.55…
$ phys_active     &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, …
$ smoke_now       &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;,…
$ alcohol_day     &lt;chr&gt; &quot;3&quot;, &quot;2&quot;, &quot;4&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;1&quot;, &quot;2&quot;, &quot;1&quot;, &quot;2&quot;, &quot;2&quot;,…
$ regular_marij   &lt;chr&gt; &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Ye…
$ bmi             &lt;dbl&gt; 43.41, 38.70, 38.46, 37.77, 36.15, 35.60, 35.41, 35.30…
</pre></div>
</div>
</div>
</div>
</section>
<section id="filtering-the-data">
<h3>Filtering the data<a class="headerlink" href="#filtering-the-data" title="Link to this heading">#</a></h3>
<p>We will need to filter the data down to our cohort of interest. In this case, we are interested in adults 40 years or older. We can use the <code class="docutils literal notranslate"><span class="pre">filter</span></code> function to <strong>keep</strong> only those participants who are older than 40.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It would be a good idea check a numerical summary of the age variable to make sure there are no extreme or impossible values before we filter.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate a summary of the age variable belonging to the sleep_trim dataframe</span>
<span class="nf">summary</span><span class="p">(</span><span class="n">sleep_trim</span><span class="o">$</span><span class="n">age</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  16.00   29.91   44.24   45.64   60.05   80.99 
</pre></div>
</div>
</div>
</div>
<p>This looks reasonbale and so we can proceed to filter.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># filter sleep_trim to select entries we want to keep assigned to a new dataframe</span>
<span class="n">sleep_40</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sleep_trim</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="nf">filter</span><span class="p">(</span><span class="n">age</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">40</span><span class="p">)</span><span class="w"> </span><span class="c1">#only those rows with age&gt;=40</span>

<span class="c1"># add a check that the filter worked</span>
<span class="nf">cat</span><span class="p">(</span><span class="s">&quot;The minimum age of our data set is:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">age</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The minimum age of our data set is: 40.00887 
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Print statements are a valuable tool when coding (in R or otherwise). Here we make use of the <code class="docutils literal notranslate"><span class="pre">cat</span></code> function. The output is a readable sentence which provides us with clear information.</p>
</div>
</section>
<section id="variable-checking">
<h3>Variable checking<a class="headerlink" href="#variable-checking" title="Link to this heading">#</a></h3>
<p>Variables are classed into distinct types in R, these types include:</p>
<ul class="simple">
<li><p>numeric: doubles <code class="docutils literal notranslate"><span class="pre">(dbl)</span></code> - decimals, or integers <code class="docutils literal notranslate"><span class="pre">(int)</span></code> - whole numbers</p></li>
<li><p>characters <code class="docutils literal notranslate"><span class="pre">(chr)</span></code> - text</p></li>
<li><p>logicals <code class="docutils literal notranslate"><span class="pre">(lgl)</span></code> - “TRUE” or “FALSE”</p></li>
<li><p>factors <code class="docutils literal notranslate"><span class="pre">(fct)</span></code> - categorical data (stored as integers)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In practise variables in a dataframe will be classed as either numeric (<code class="docutils literal notranslate"><span class="pre">(dbl)</span></code> by default) or character <code class="docutils literal notranslate"><span class="pre">(chr)</span></code>. We can see the class when we <code class="docutils literal notranslate"><span class="pre">glimpse</span></code> the dataframe or by using the <code class="docutils literal notranslate"><span class="pre">class</span></code> function.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># determing the class of variables: age, hypertension and alcohol_day</span>
<span class="nf">cat</span><span class="p">(</span><span class="s">&quot;The variable &#39;age&#39; is of type:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">age</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="nf">cat</span><span class="p">(</span><span class="s">&quot;The variable &#39;hypertension&#39; is of type:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">hypertension</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
<span class="nf">cat</span><span class="p">(</span><span class="s">&quot;The variable &#39;alcohol_day&#39; is of type:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">alcohol_day</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The variable &#39;age&#39; is of type: numeric 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The variable &#39;hypertension&#39; is of type: character 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The variable &#39;alcohol_day&#39; is of type: character 
</pre></div>
</div>
</div>
</div>
<p>Although the classification of <code class="docutils literal notranslate"><span class="pre">[age]</span></code> and <code class="docutils literal notranslate"><span class="pre">[hypertension]</span></code> seems appropriate, we notice that <code class="docutils literal notranslate"><span class="pre">[alcolhol_day]</span></code> is classed as a character when we would expect the ammount someone drinks to be recorded as a numeric value. This is something we will need to fix.</p>
<p>We will go through each of our variables in turn and check for required fixes.</p>
<p>In addition to each variable having a type/class in R they also fall into statistical types:</p>
<ul class="simple">
<li><p>a continuous variable can take on “infinitely” many values.</p></li>
<li><p>discrete, dichotomous or categorical variables can take on only a certain set of values.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As a rule of thumb:</p>
<ul class="simple">
<li><p>if we are checking a continuous variable we can use <code class="docutils literal notranslate"><span class="pre">summary</span></code> which tells you about the distribution of values for that variable.</p></li>
<li><p>if we are checking a discrete, dichotomous or catergorical variables we can use the <code class="docutils literal notranslate"><span class="pre">table</span></code> function which tabulates counts of each response.</p></li>
</ul>
</div>
<p>We will first consider our exposure variable, in this case, the number of hours a participant sleeps each night <code class="docutils literal notranslate"><span class="pre">[sleep_hrs_night]</span></code>. This is a continuous variable so we will check to see if the summary values look reasonable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate a summary of sleep_hrs_night variable</span>
<span class="nf">summary</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">sleep_hrs_night</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  4.003   6.364   7.288   7.323   8.445   9.998 
</pre></div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Although the values look reasonable, 4 hours is not a lot of sleep. In practice, it might be worth checking with the data provider to make sure that there is not a typo somewhere.</p>
</div>
<p>Next we will check our outcome variable, in this case whether a participant has hypertension or not, <code class="docutils literal notranslate"><span class="pre">[hypertension]</span></code>. This is a catergorical variable in our data set so we can tabulate the responses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hypertension could have been recorded as a dichotomous variable since the response could have been yes or no to a question does the participant have hypertension?</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a table of values for hypertension</span>
<span class="nf">table</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">hypertension</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   Hypertension No Hypertension 
           1033            1701 
</pre></div>
</div>
</div>
</div>
<p>This is good there are two possible responses as we would expect.</p>
<p>Now let’s fix the <code class="docutils literal notranslate"><span class="pre">[alcohol_day]</span></code> variable, which we saw earlier was classed a character variable. We will tabulate the variable to see what is going on.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a table of values for alcohol_day</span>
<span class="nf">table</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">alcohol_day</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    1    10    12    13    14    15    16    17    18     2    20    21    24 
 1007    21    40     1     1     7     1     2     1   734     3     2     1 
    3    30     4     5     6     7     8     9   one   One   six  thre three 
  355     1   212   110   133    24    33     4    13     9     2     1    10 
Three 
    6 
</pre></div>
</div>
</div>
</div>
<p>We can see each response (e.g 1 drink a day) is listed with the respective count (e.g. 1007 have 1 drink a day). We notice that some values were written as text. We need to replace the values written as text and reclassify the variable as numeric.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Since best practice is to maintain the original data we will create a new variable <code class="docutils literal notranslate"><span class="pre">[alcohol_day_num]</span></code> using the <code class="docutils literal notranslate"><span class="pre">mutate</span></code> function.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a numeric alcohol drink count variable called alcohol_day_num</span>
<span class="n">sleep_40</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sleep_40</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="nf">mutate</span><span class="p">(</span><span class="n">alcohol_day_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">case_when</span><span class="p">(</span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="c1"># if alcohol_day is one replace with 1</span>
<span class="w">                                   </span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;One&quot;</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
<span class="w">                                   </span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;three&quot;</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">3</span><span class="p">,</span>
<span class="w">                                   </span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Three&quot;</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">3</span><span class="p">,</span>
<span class="w">                                   </span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;thre&quot;</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">3</span><span class="p">,</span>
<span class="w">                                   </span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Six&quot;</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">6</span><span class="p">,</span>
<span class="w">                                   </span><span class="kc">TRUE</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">alcohol_day</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“There was 1 warning in `mutate()`.
<span class=" -Color -Color-Cyan">ℹ</span> In argument: `alcohol_day_num = case_when(...)`.
Caused by warning:
<span class=" -Color -Color-Yellow">!</span> NAs introduced by coercion”
</pre></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>R warns us that since we classified <code class="docutils literal notranslate"><span class="pre">[alcohol_day_num]</span></code> as a numeric variable any remaining text values will be replaced with missing values (NA) so we should check to see if we missed anything by tabulating this new variable.</p>
</div>
<p>A slightly tidier version of this code makes use of the <code class="docutils literal notranslate"><span class="pre">%in%</span></code> and <code class="docutils literal notranslate"><span class="pre">c()</span></code> functions</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a numeric alcohol drink count variable called alcohol_day_num</span>
<span class="n">sleep_40</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sleep_40</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="nf">mutate</span><span class="p">(</span><span class="n">alcohol_day_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">case_when</span><span class="p">(</span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;one&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;One&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="c1">#replace one or One with 1</span>
<span class="w">                                   </span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;three&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Three&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;thre&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">3</span><span class="p">,</span>
<span class="w">                                   </span><span class="n">alcohol_day</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;six&quot;</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="m">6</span><span class="p">,</span>
<span class="w">                                   </span><span class="kc">TRUE</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">alcohol_day</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“There was 1 warning in `mutate()`.
<span class=" -Color -Color-Cyan">ℹ</span> In argument: `alcohol_day_num = case_when(...)`.
Caused by warning:
<span class=" -Color -Color-Yellow">!</span> NAs introduced by coercion”
</pre></div>
</div>
</div>
</div>
<p>Now we will check that our <code class="docutils literal notranslate"><span class="pre">mutate</span></code> function has fixed the problem.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a table of values for alcohol_day_num</span>
<span class="nf">table</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">alcohol_day_num</span><span class="p">)</span>

<span class="c1"># check the class of alcohol_day_num</span>
<span class="nf">cat</span><span class="p">(</span><span class="s">&quot;alcohol_day_num is of type:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">alcohol_day_num</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   1    2    3    4    5    6    7    8    9   10   12   13   14   15   16   17 
1029  734  372  212  110  135   24   33    4   21   40    1    1    7    1    2 
  18   20   21   24   30 
   1    3    2    1    1 
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>alcohol_day_num is of type: numeric 
</pre></div>
</div>
</div>
</div>
<p>We see that <code class="docutils literal notranslate"><span class="pre">[alcohol_day_num]</span></code> is correctly classed as a numeric variable and the counts align with those from <code class="docutils literal notranslate"><span class="pre">[alcohol_day]</span></code>.</p>
<p>Now let us check the remaining variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># check marijuana indicator variable</span>
<span class="nf">table</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">regular_marij</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  No  Yes 
1895  839 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># check smoker indicator variable</span>
<span class="nf">table</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">smoke_now</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  No  Yes 
1555 1179 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># check physical activity indicator variable</span>
<span class="nf">table</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">phys_active</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>  No  Yes 
1501 1233 
</pre></div>
</div>
</div>
</div>
<p>All three of these variables are dichotomous (or binary) variables with only yes and no responses. Everything looks good.</p>
<p>Moving onto the <code class="docutils literal notranslate"><span class="pre">[bmi]</span></code> data. As this data is likely to take continuous rather than discrete values we would use the <code class="docutils literal notranslate"><span class="pre">summary</span></code> function rather than tabulating all values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># generate a summary of bmi variable</span>
<span class="nf">summary</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">bmi</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  15.02   24.84   28.20   29.19   32.47   81.25 
</pre></div>
</div>
</div>
</div>
<p>This seems reasonable, but the <a class="reference internal" href="#scenario"><span class="xref myst">Scenario</span></a> listed BMI groups (e.g. underweight, healthy, overweight, obese) rather than the BMI. Let us create a new bmi variable to aggregate participants into their BMI group.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a discrete BMI variable called bmi_group</span>
<span class="n">sleep_40</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sleep_40</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="nf">mutate</span><span class="p">(</span><span class="n">bmi_group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">case_when</span><span class="p">(</span><span class="n">bmi</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">18.5</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Underweight&quot;</span><span class="p">,</span>
<span class="w">                             </span><span class="n">bmi</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">18.5</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">bmi</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Healthy&quot;</span><span class="p">,</span>
<span class="w">                             </span><span class="n">bmi</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">25</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">bmi</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Overweight&quot;</span><span class="p">,</span>
<span class="w">                             </span><span class="n">bmi</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Obese&quot;</span><span class="p">,</span>
<span class="w">                             </span><span class="kc">TRUE</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="kc">NA</span><span class="p">))</span><span class="w"> </span><span class="c1"># any values that are not captured by the conditions are set as missing</span>
</pre></div>
</div>
</div>
</div>
<p>Now that we have a discrete variable <code class="docutils literal notranslate"><span class="pre">[bmi_group]</span></code> we can check this using the <code class="docutils literal notranslate"><span class="pre">table</span></code> function and check we don’t have any missing values.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a table of values for bmi_group</span>
<span class="nf">table</span><span class="p">(</span><span class="n">sleep_40</span><span class="o">$</span><span class="n">bmi_group</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    Healthy       Obese  Overweight Underweight 
        670        1029         999          36 
</pre></div>
</div>
</div>
</div>
<p>We can also check that we got our groupings correct. The following lines of code show that our minimum and maximum values all line up with the correct BMI groupings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sleep_40</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="nf">group_by</span><span class="p">(</span><span class="n">bmi_group</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="nf">summarise</span><span class="p">(</span><span class="n">min_bmi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">bmi</span><span class="p">),</span>
<span class="w">          </span><span class="n">max_bmi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">bmi</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">            </span><span class="nf">arrange</span><span class="p">(</span><span class="n">min_bmi</span><span class="p">)</span><span class="w"> </span><span class="c1"># arrange in ascending min_bmi order (default alphabetical)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 3</caption>
<thead>
	<tr><th scope=col>bmi_group</th><th scope=col>min_bmi</th><th scope=col>max_bmi</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Underweight</td><td>15.02</td><td>18.44</td></tr>
	<tr><td>Healthy    </td><td>18.50</td><td>24.99</td></tr>
	<tr><td>Overweight </td><td>25.00</td><td>29.96</td></tr>
	<tr><td>Obese      </td><td>30.00</td><td>81.25</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualisations">
<h1>Visualisations<a class="headerlink" href="#visualisations" title="Link to this heading">#</a></h1>
<p>Now that the data is cleaned and ready to go we can start creating our data summaries and visuals.</p>
<section id="tables">
<h2>Tables<a class="headerlink" href="#tables" title="Link to this heading">#</a></h2>
<p>Let’s create a table for the research project. A table should include all the variables of interest in the study and thus, describes the sample.
We will use the <code class="docutils literal notranslate"><span class="pre">select</span></code> function to pick the variables to include in the table and the <code class="docutils literal notranslate"><span class="pre">tbl_summary</span></code> function from the <code class="docutils literal notranslate"><span class="pre">gtsummary</span></code> package to create the table. The package <code class="docutils literal notranslate"><span class="pre">gtsummary</span></code> creates publication ready tables and visuals.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is not uncommon to miss something in the initial data cleaning, so carefully examine all the tables and graphs you make. If you do notice some data cleaning step that you missed, add the missed step to the original data cleaning code, if possible, to keep your code organised.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a table and assign it to the object table_1</span>
<span class="n">table_1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sleep_40</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="c1"># select the variables to include</span>
<span class="w">  </span><span class="nf">select</span><span class="p">(</span><span class="n">gender</span><span class="p">,</span>
<span class="w">         </span><span class="n">age</span><span class="p">,</span>
<span class="w">         </span><span class="n">phys_active</span><span class="p">,</span>
<span class="w">         </span><span class="n">smoke_now</span><span class="p">,</span>
<span class="w">         </span><span class="n">alcohol_day_num</span><span class="p">,</span>
<span class="w">         </span><span class="n">regular_marij</span><span class="p">,</span>
<span class="w">         </span><span class="n">bmi_group</span><span class="p">,</span>
<span class="w">         </span><span class="n">hypertension</span><span class="p">,</span>
<span class="w">         </span><span class="n">sleep_hrs_night</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">           </span><span class="nf">tbl_summary</span><span class="p">(</span><span class="n">missing_text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;(Missing)&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="c1"># define clear labels for each variable</span>
<span class="w">                </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">gender</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Gender&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">age</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Age&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">phys_active</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Regularly Physically Activity&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">smoke_now</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Current Smoker&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">alcohol_day_num</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Alcohol Drinks per Day&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">regular_marij</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Regular Marijuana User&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">bmi_group</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;BMI&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">hypertension</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Hypertension&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">sleep_hrs_night</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;Sleep (hrs/night)&quot;</span><span class="p">))</span>

<span class="c1"># display the table</span>
<span class="c1"># table_1</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="graphs">
<h2>Graphs<a class="headerlink" href="#graphs" title="Link to this heading">#</a></h2>
<p>We will create a simple graph of the average number of hours a participant slept per night grouped by the participants hypertension status. We will create a box plot, where separate boxes are used for participants with and without hypertension.
Let’s start with a basic box plot of hours of sleep per night and then make it looks better with a few tweaks.
We will use the <code class="docutils literal notranslate"><span class="pre">ggplot</span></code> function and <code class="docutils literal notranslate"><span class="pre">geom_boxplot</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># a simple boxplot of all the data</span>
<span class="n">sleep_40</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hypertension</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sleep_hrs_night</span><span class="p">))</span><span class="w"> </span><span class="o">+</span>
<span class="w">  </span><span class="nf">geom_boxplot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/f066e278984d2c09c197d76062b15a860eae70477208c10dc89de45a3f640803.png"><img alt="_images/f066e278984d2c09c197d76062b15a860eae70477208c10dc89de45a3f640803.png" src="_images/f066e278984d2c09c197d76062b15a860eae70477208c10dc89de45a3f640803.png" style="width: 420px; height: 420px;" /></a>
</div>
</div>
<p>This is a great start but we could make the graph more aesthetically pleasing. We could:</p>
<ul class="simple">
<li><p>make the axis labels clear</p></li>
<li><p>change the font size</p></li>
<li><p>add colour based on hypertension status</p></li>
<li><p>change the background by updating the plot theme</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sleep_40</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hypertension</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sleep_hrs_night</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hypertension</span><span class="p">,</span>
<span class="w">             </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hypertension</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hypertension</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="c1"># add colour</span>
<span class="w">  </span><span class="nf">geom_boxplot</span><span class="p">()</span><span class="w"> </span><span class="o">+</span>
<span class="w">  </span><span class="nf">scale_colour_manual</span><span class="p">(</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;#7c3b37&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;#004c4e&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="c1"># add defined outlines to boxes</span>
<span class="w">  </span><span class="nf">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hypertension Status&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hours of Sleep/Night&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="c1"># fix labels</span>
<span class="w">  </span><span class="nf">guides</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;none&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="c1"># remove legend</span>
<span class="w">  </span><span class="nf">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="c1"># change background</span>
<span class="w">  </span><span class="nf">theme</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">))</span><span class="w"> </span><span class="c1"># increase the font size</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<a class="reference internal image-reference" href="_images/b1a27e690ea995954a5e34a2c0028345a2a70de2aa11adde934f741b2ad26da4.png"><img alt="_images/b1a27e690ea995954a5e34a2c0028345a2a70de2aa11adde934f741b2ad26da4.png" src="_images/b1a27e690ea995954a5e34a2c0028345a2a70de2aa11adde934f741b2ad26da4.png" style="width: 420px; height: 420px;" /></a>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            name: "ir",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="RBasics.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">An Introduction to R</p>
      </div>
    </a>
    <a class="right-next"
       href="ANOVA.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Case Study: ANOVA</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Data Workflow</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario">Scenario</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#r-set-up">R Set-up</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-load-packages">Install/Load Packages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#path-setting">Path Setting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#load-in-your-data">Load in your Data</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#data-wrangling">Data Wrangling</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#viewing-your-data">Viewing your data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-cleaning-and-preparation">Data Cleaning and Preparation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-column-names">Cleaning column names</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#trimming-the-data">Trimming the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#filtering-the-data">Filtering the data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-checking">Variable checking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#visualisations">Visualisations</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tables">Tables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graphs">Graphs</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Dr Cicely Macnamara & Robin Alexander
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>